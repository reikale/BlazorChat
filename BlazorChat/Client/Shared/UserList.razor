@using BlazorChat.Shared.Models
@using Syncfusion.Blazor
@inject HttpClient Http

@if(Users == null)
{
   <div class="spinner-border text-secondary" style="width: 3rem; height: 3rem;" role="status">
      <span class="visually-hidden">Loading...</span>
    </div> 
}else{
    <div class="table-responsive">
 <table class="table table-hover">
  <thead>
    <tr>
      <th scope="col">Id</th>
      <th scope="col">First Name</th>
      <th scope="col">Last Name</th>
      <th scope="col">Email</th>
    </tr>
  </thead>
  <tbody>
      @foreach (var user in Users)
     {
          <tr>
          <th scope="row">@user.Id</th>
          <td>@user.FirstName</td>
          <td>@user.LastName</td>
          <td>@user.Email</td>
        </tr>
     }
  </tbody>
</table>
</div>
}



@code {
    private static List<User> Users = new List<User>();

    protected override async Task OnInitializedAsync()
    {
        
        var users = await Http.GetFromJsonAsync<List<User>>("api/user");
        
        if(users != null)
        {
            Users = users;
        }
        else
        {
            
        }
    }
}
